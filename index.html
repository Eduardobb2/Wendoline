<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¿Quieres ser mi novia?</title>
    <!-- Google Fonts: Montserrat y alternativas -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            min-height: 100vh;
            background: linear-gradient(to bottom right, #ffccd5, #ffe6f0);
            font-family: 'Montserrat', 'Quicksand', 'Nunito', 'Comic Sans MS', cursive, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            text-align: center;
            overflow-x: hidden;
        }
        .centerpiece {
            width: 100%;
            max-width: 400px;
            margin: 0 auto 10px auto;
            padding: 0 10px;
            box-sizing: border-box;
        }
        .decoraciones-arriba,
        .decoraciones-abajo {
            display: flex;
            flex-direction: row;
            gap: 10px;
            justify-content: center;
            margin-bottom: 6px;
            flex-wrap: wrap;
        }
        .decoraciones-abajo {
            margin-top: 6px;
            margin-bottom: 0;
        }
        .decoraciones svg {
            vertical-align: middle;
        }
        img {
            width: 48vw;
            max-width: 210px;
            min-width: 120px;
            height: auto;
            border-radius: 50%;
            border: 4px solid #e91e63;
            margin: 10px 0 18px 0;
            object-fit: cover;
            background: #fff;
            box-shadow: 0 3px 16px 0 #e91e6335;
        }
        h1 {
            color: #e91e63;
            font-size: 2em;
            margin: 10px 0;
            word-break: break-word;
        }
        .botones {
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 24px;
            margin: 28px 0 12px 0;
            position: relative;
            z-index: 2;
            min-height: 56px;
        }
        button {
            padding: 12px 22px;
            font-size: 1.15em;
            border: none;
            border-radius: 10px;
            color: white;
            background-color: #e91e63;
            cursor: pointer;
            transition: 0.3s;
            font-family: inherit;
            position: relative;
        }
        button:hover {
            background-color: #ad1457;
            transform: scale(1.08);
        }
        #noButton {
            position: absolute !important;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }
        #confetti-canvas {
            pointer-events: none;
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 9999;
        }
        #ring {
            display: none;
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            z-index: 10000;
            width: 120px;
            height: 120px;
            animation: ring-pop 1s ease;
        }
        @keyframes ring-pop {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            60% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            80% { transform: translate(-50%, -50%) scale(0.9); }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        .dedicatoria {
            margin: 22px auto 8vh auto;
            max-width: 480px;
            font-size: 1.1em;
            color: #ad1457;
            background: #fff8fbcc;
            border-radius: 18px;
            padding: 18px 13px;
            box-shadow: 0 2px 8px 0 #e91e6340;
            line-height: 1.4;
            font-weight: 500;
            word-break: break-word;
            display: none;
        }
        .dedicatoria .corazon {
            color: #e91e63;
            font-size: 1.3em;
            vertical-align: middle;
            margin-left: 6px;
        }
        @media (max-width: 480px) {
            h1 {
                font-size: 1.45em;
            }
            .dedicatoria {
                font-size: .97em;
                padding: 14px 6px;
            }
        }
        @media (max-width: 370px) {
            img { min-width: 98px; }
        }
    </style>
</head>
<body>
    <div class="centerpiece">
        <div class="decoraciones decoraciones-arriba">
            <!-- Tulipán SVG -->
            <svg width="32" height="50" viewBox="0 0 40 70">
                <rect x="18" y="30" width="4" height="38" fill="#449d44"/>
                <ellipse cx="20" cy="30" rx="12" ry="17" fill="#ff69b4"/>
                <ellipse cx="12" cy="27" rx="4" ry="7" fill="#ffb6c1"/>
                <ellipse cx="28" cy="27" rx="4" ry="7" fill="#ffb6c1"/>
            </svg>
            <!-- Corazón SVG grande -->
            <svg width="28" height="28" viewBox="0 0 50 50">
                <path d="M24.5,47 L10,32 C2,24 10,12 24.5,20 C39,12 47,24 39,32 Z" fill="#e91e63"/>
            </svg>
        </div>

        <!-- Imagen del golden retriever -->
        <img src="https://images.unsplash.com/photo-1558788353-f76d92427f16?auto=format&fit=facearea&w=400&h=400&facepad=3&q=80" alt="Golden cachorro" />

        <h1>💖 ¿Quieres ser mi novia? 💖</h1>

        <div class="decoraciones decoraciones-abajo">
            <!-- Corazón SVG grande -->
            <svg width="28" height="28" viewBox="0 0 50 50">
                <path d="M24.5,47 L10,32 C2,24 10,12 24.5,20 C39,12 47,24 39,32 Z" fill="#e91e63"/>
            </svg>
            <!-- Tulipán SVG -->
            <svg width="32" height="50" viewBox="0 0 40 70">
                <rect x="18" y="30" width="4" height="38" fill="#388e3c"/>
                <ellipse cx="20" cy="30" rx="12" ry="17" fill="#ffb300"/>
                <ellipse cx="12" cy="27" rx="4" ry="7" fill="#ffe082"/>
                <ellipse cx="28" cy="27" rx="4" ry="7" fill="#ffe082"/>
            </svg>
        </div>
    </div>

    <div class="botones" id="botones">
        <button id="siButton" onclick="respuesta('Sí')">Sí 🥰</button>
        <button id="noButton" onmouseover="moverNo()" onclick="respuesta('No')">No 😢</button>
    </div>

    <!-- Música siempre sonando, sin requerir interacción (algunos navegadores móviles pueden requerir interacción) -->
    <audio id="love-audio" src="https://cdn.pixabay.com/audio/2023/03/23/audio_12c4e3e8b1.mp3" autoplay loop></audio>

    <!-- Canvas para confeti -->
    <canvas id="confetti-canvas"></canvas>

    <!-- SVG para anillo -->
    <div id="ring">
        <svg viewBox="0 0 120 120">
            <!-- Aro -->
            <ellipse cx="60" cy="80" rx="40" ry="35" fill="gold" stroke="#bfa700" stroke-width="8"/>
            <!-- Diamante -->
            <polygon points="60,35 85,60 60,20 35,60" fill="#b7f9ff" stroke="#5ed4f6" stroke-width="3"/>
            <ellipse cx="60" cy="45" rx="12" ry="7" fill="#d8faff" stroke="#a4e7f6" stroke-width="2"/>
        </svg>
    </div>

    <div class="dedicatoria" id="dedicatoria">
        Ya estamos en una nueva etapa, espero y la siguiente sea poder ser marido y mujer, o papas de un perrito, o ya si nos sobra amor, tener unos chamaquitos, lo que sea que pase que siempre estemo[...]
    </div>

    <script>
        // Música para Safari/iOS: intentar reproducir tras interacción si no suena
        const audio = document.getElementById('love-audio');
        let hasPlayed = false;
        function playAudio() {
            if (!hasPlayed) {
                audio.play().catch(()=>{});
                hasPlayed = true;
            }
        }
        // Iniciar audio al primer toque/click si es necesario
        window.addEventListener('touchstart', playAudio, { once: true });
        window.addEventListener('click', playAudio, { once: true });

        // Confeti básico con duración de 5 segundos
        const confettiColors = ['#e91e63', '#f50057', '#ffeb3b', '#00bcd4', '#8bc34a', '#fff', '#f8bbd0'];
        function throwConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const confettis = [];
            for (let i = 0; i < 150; i++) {
                confettis.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * -canvas.height,
                    r: 6 + Math.random() * 10,
                    d: Math.random() * 50 + 30,
                    color: confettiColors[Math.floor(Math.random()*confettiColors.length)],
                    tilt: Math.random() * 10 - 5,
                    tiltAngle: Math.random() * Math.PI,
                    tiltAngleIncremental: (Math.random() * 0.07) + 0.05,
                    gravity: Math.random() * 2 + 2,
                });
            }
            let angle = 0;
            let animationFrame;
            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                angle += 0.01;
                for (let i = 0; i < confettis.length; i++) {
                    let c = confettis[i];
                    c.y += c.gravity;
                    c.tiltAngle += c.tiltAngleIncremental;
                    c.tilt = Math.sin(c.tiltAngle) * 15;
                    ctx.beginPath();
                    ctx.ellipse(
                        c.x + c.tilt,
                        c.y,
                        c.r,
                        c.r/2,
                        angle,
                        0,
                        2 * Math.PI
                    );
                    ctx.fillStyle = c.color;
                    ctx.fill();
                    // reinicia si sale de pantalla
                    if (c.y > canvas.height + 20) {
                        c.x = Math.random() * canvas.width;
                        c.y = -20;
                    }
                }
                animationFrame = requestAnimationFrame(draw);
            }
            draw();
            // Detener confeti después de 5 segundos
            setTimeout(() => {
                cancelAnimationFrame(animationFrame);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                canvas.width = 0; canvas.height = 0;
            }, 5000);
        }

        function respuesta(opcion) {
            playAudio();
            if (opcion === "Sí") {
                alert("🥳 Muy bien chiquita bebe ❤️ Te amo mucho 💖");
                mostrarAnillo();
                throwConfetti();
                document.getElementById('dedicatoria').style.display = 'block';
            } else {
                alert("😢 Bueno... 💔");
            }
        }

        function mostrarAnillo() {
            const ring = document.getElementById('ring');
            ring.style.display = 'block';
            ring.style.animation = 'ring-pop 1s ease';
            setTimeout(() => {
                ring.style.display = 'none';
            }, 5000); // ahora 5 segundos
        }

        // Botón "No" que se mueve aleatoriamente dentro del área de los botones
        function moverNo() {
            playAudio();
            const noBtn = document.getElementById('noButton');
            const botones = document.getElementById('botones');
            const siBtn = document.getElementById('siButton');
            // Área máxima donde puede moverse el botón (parent: .botones)
            const parentRect = botones.getBoundingClientRect();
            const btnRect = noBtn.getBoundingClientRect();

            // Calcula límites para que no se salga del contenedor ni se superponga con el botón "Sí"
            const maxLeft = parentRect.width - btnRect.width;
            const maxTop = parentRect.height - btnRect.height;

            let left, top;
            let tries = 0;
            do {
                left = Math.random() * maxLeft;
                top = Math.random() * maxTop;
                tries++;
                // Verifica que no se superponga con el botón "Sí"
                const siRect = siBtn.getBoundingClientRect();
                const noRectSimulado = {
                    left: parentRect.left + left,
                    right: parentRect.left + left + btnRect.width,
                    top: parentRect.top + top,
                    bottom: parentRect.top + top + btnRect.height
                };
                const overlap =
                    !(noRectSimulado.right < siRect.left ||
                      noRectSimulado.left > siRect.right ||
                      noRectSimulado.bottom < siRect.top ||
                      noRectSimulado.top > siRect.bottom);
                if (!overlap || tries > 20) break;
            } while (true);

            noBtn.style.left = left + "px";
            noBtn.style.top = top + "px";
        }

        // Ajusta el canvas de confeti si cambia el tamaño de la ventana
        window.addEventListener('resize', () => {
            const canvas = document.getElementById('confetti-canvas');
            if (canvas.width > 0) {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
        });

        // Por si el usuario hace hover antes de presionar cualquier botón, asegura play en "No"
        document.getElementById('noButton').addEventListener('mouseover', playAudio);
    </script>
</body>
</html>
